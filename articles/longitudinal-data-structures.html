<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Longitudinal Data Structures • brolgar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Longitudinal Data Structures">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brolgar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.5.9100</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/getting-started.html">Getting Started</a>
</li>
<li>
  <a href="../articles/visualisation-gallery.html">Gallery</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/longitudinal-data-structures.html">Data Structures</a>
    </li>
    <li>
      <a href="../articles/exploratory-modelling.html">Exploratory Modelling</a>
    </li>
    <li>
      <a href="../articles/finding-features.html">Finding Features</a>
    </li>
    <li>
      <a href="../articles/id-interesting-obs.html">Identify Interesting Observations</a>
    </li>
    <li>
      <a href="../articles/mixed-effects-models.html">Exploring Mixed Effects Models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/njtierney/brolgar">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Longitudinal Data Structures</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/njtierney/brolgar/blob/master/vignettes/longitudinal-data-structures.Rmd"><code>vignettes/longitudinal-data-structures.Rmd</code></a></small>
      <div class="hidden name"><code>longitudinal-data-structures.Rmd</code></div>

    </div>

    
    
<p>All data has structure. There are ways that we can specify some permanent structure to the data, which gives some useful features later on, for free. This vignette discusses how to structure your longitudinal data as a time series, and what that means.</p>
<p>This idea, that <strong>longitudinal data is a time series</strong>, is <em>Big Idea #1</em> behind the <code>brolgar</code> package.</p>
<blockquote>
<p>Anything that is observed sequentially over time is a time series. – <a href="https://otexts.com/fpp2/data-methods.html">Professors Rob Hyndman and George Athanasopolous</a></p>
</blockquote>
<p>Longitudinal data has a few other names, such as “panel data”. I used to always think that “time series” was defined as something that was by definition “regular” - with equal spacings between observations. This is actually not the case - you can have both “regular”, and “irregular” time series.</p>
<p>Why care about using a time series? Once we account for this time series structure inherent in longitudinal data, we gain access to a suite of nice tools that simplify and accelerate how we work with time series data. <code>brolgar</code> is built on top of the powerful <a href="https://tsibble.tidyverts.org/"><code>tsibble</code></a> package by <a href="https://earo.me/">Earo Wang</a>, if you would like to learn more, see the <a href="https://tsibble.tidyverts.org/">official package documentation</a> or read <a href="https://arxiv.org/abs/1901.10257">the paper</a>.</p>
<div id="converting-your-longitudinal-data-to-a-time-series" class="section level2">
<h2 class="hasAnchor">
<a href="#converting-your-longitudinal-data-to-a-time-series" class="anchor"></a>Converting your longitudinal data to a time series</h2>
<p>To convert longitudinal data into a “<strong>t</strong>ime <strong>s</strong>eries tibble”, a <a href="https://tsibble.tidyverts.org/"><code>tsibble</code></a>, we need to consider:</p>
<ul>
<li>What identifies the <strong>time</strong> component of the data? This is the <strong>index</strong>
</li>
<li>What is the <strong>unique identifier</strong> of an individual/series? This is the <strong>key</strong>
</li>
</ul>
<p>Together, the <strong>index</strong> and <strong>key</strong> uniquely identify an observation.</p>
<p>What do we mean by this? Let’s look at the first section of the wages, <strong>wages</strong> data analysed in Singer &amp; Willett (2003):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(brolgar)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr))</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span>(wages, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">#&gt; # A tsibble: 10 x 9 [!]</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">#&gt; # Key:       id [2]</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">#&gt;       id ln_wages    xp   ged xp_since_ged black hispanic high_grade</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">#&gt;    &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;        &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co">#&gt;  1    31     1.49 0.015     1        0.015     0        1          8</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co">#&gt;  2    31     1.43 0.715     1        0.715     0        1          8</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co">#&gt;  3    31     1.47 1.73      1        1.73      0        1          8</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co">#&gt;  4    31     1.75 2.77      1        2.77      0        1          8</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="co">#&gt;  5    31     1.93 3.93      1        3.93      0        1          8</span></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="co">#&gt;  6    31     1.71 4.95      1        4.95      0        1          8</span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co">#&gt;  7    31     2.09 5.96      1        5.96      0        1          8</span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="co">#&gt;  8    31     2.13 6.98      1        6.98      0        1          8</span></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="co">#&gt;  9    36     1.98 0.315     1        0.315     0        0          9</span></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co">#&gt; 10    36     1.80 0.983     1        0.983     0        0          9</span></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="co">#&gt; # … with 1 more variable: unemploy_rate &lt;dbl&gt;</span></span></code></pre></div>
<p>We have the <code>id</code> column, which identifies an individual.</p>
<p>We also have the <code>xp</code> column, which identifies the experience an individual has.</p>
<p>So:</p>
<ul>
<li>key: <code>id</code>
</li>
<li>index: <code>xp</code>
</li>
</ul>
<p>We could create a <code>tsibble</code> of this data by using the <code>as_tsibble</code> function from <code>tsibble</code>, also stating, <code>regular = FALSE</code>, since we have an <code>irregular</code> time series (the measurements are not regularly measured, and have a varying distance between each measurement):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tsibble)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html">as_tsibble</a></span>(<span class="dt">x =</span> wages,</span>
<span id="cb2-3"><a href="#cb2-3"></a>           <span class="dt">key =</span> id,</span>
<span id="cb2-4"><a href="#cb2-4"></a>           <span class="dt">index =</span> xp,</span>
<span id="cb2-5"><a href="#cb2-5"></a>           <span class="dt">regular =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>#&gt; # A tsibble: 6,402 x 9 [!]
#&gt; # Key:       id [888]
#&gt;       id ln_wages    xp   ged xp_since_ged black hispanic high_grade
#&gt;    &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;        &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;
#&gt;  1    31     1.49 0.015     1        0.015     0        1          8
#&gt;  2    31     1.43 0.715     1        0.715     0        1          8
#&gt;  3    31     1.47 1.73      1        1.73      0        1          8
#&gt;  4    31     1.75 2.77      1        2.77      0        1          8
#&gt;  5    31     1.93 3.93      1        3.93      0        1          8
#&gt;  6    31     1.71 4.95      1        4.95      0        1          8
#&gt;  7    31     2.09 5.96      1        5.96      0        1          8
#&gt;  8    31     2.13 6.98      1        6.98      0        1          8
#&gt;  9    36     1.98 0.315     1        0.315     0        0          9
#&gt; 10    36     1.80 0.983     1        0.983     0        0          9
#&gt; # … with 6,392 more rows, and 1 more variable: unemploy_rate &lt;dbl&gt;</code></pre>
<p>Note the following information printed at the top of <code>wages</code></p>
<pre><code># A tsibble: 6,402 x 9 [!]
# Key:       id [888]
...</code></pre>
<p>This says:</p>
<ul>
<li>We have 6402 rows,</li>
<li>with 9 columns.</li>
</ul>
<p>The <code>!</code> at the top means that there is no regular spacing between series</p>
<p>The “key” variable is then listed - <code>id</code>, of which there 888.</p>
</div>
<div id="using-time-series-data-in-brolgar" class="section level1">
<h1 class="hasAnchor">
<a href="#using-time-series-data-in-brolgar" class="anchor"></a>Using time series data in <code>brolgar</code>
</h1>
<p>This idea of longitudinal data is core to brolgar. Other vignettes in the package will further show why the time series <code>tsibble</code> is useful.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#converting-your-longitudinal-data-to-a-time-series">Converting your longitudinal data to a time series</a></li>
      <li><a href="#using-time-series-data-in-brolgar">Using time series data in <code>brolgar</code></a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Nicholas Tierney, Di Cook, Tania Prvan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '48bc42eefc5234a6463c3b99e53dfda1',
    indexName: 'brolgar',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
